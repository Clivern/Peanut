(self["webpackChunkpeanut"]=self["webpackChunkpeanut"]||[]).push([[881],{9881:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"columns is-desktop is-centered"},[t("div",{staticClass:"column is-4"},[t("br"),t("br"),t("section",[t("b-field",{attrs:{label:"Service Type"}},[t("b-select",{attrs:{placeholder:"Select a service type",expanded:""},on:{input:function(t){return e.onServiceChange("true")}},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("option",{attrs:{value:"mysql"}},[e._v("MySQL")]),t("option",{attrs:{value:"mariadb"}},[e._v("MariaDB")]),t("option",{attrs:{value:"postgresql"}},[e._v("PostgreSQL")]),t("option",{attrs:{value:"redis"}},[e._v("Redis")]),t("option",{attrs:{value:"etcd"}},[e._v("Etcd")]),t("option",{attrs:{value:"grafana"}},[e._v("Grafana")]),t("option",{attrs:{value:"elasticsearch"}},[e._v("Elasticsearch")]),t("option",{attrs:{value:"mongodb"}},[e._v("MongoDB")]),t("option",{attrs:{value:"graphite"}},[e._v("Graphite")]),t("option",{attrs:{value:"prometheus"}},[e._v("Prometheus")]),t("option",{attrs:{value:"zipkin"}},[e._v("Zipkin")]),t("option",{attrs:{value:"memcached"}},[e._v("Memcached")]),t("option",{attrs:{value:"mailhog"}},[e._v("Mailhog")]),t("option",{attrs:{value:"jaeger"}},[e._v("Jaeger")]),t("option",{attrs:{value:"rabbitmq"}},[e._v("RabbitMQ")]),t("option",{attrs:{value:"consul"}},[e._v("Consul")]),t("option",{attrs:{value:"vault"}},[e._v("Vault")]),t("option",{attrs:{value:"cassandra"}},[e._v("Cassandra")]),t("option",{attrs:{value:"minio"}},[e._v("Minio")]),t("option",{attrs:{value:"registry"}},[e._v("Registry")]),t("option",{attrs:{value:"ghost"}},[e._v("Ghost")]),t("option",{attrs:{value:"httpbin"}},[e._v("Httpbin")]),t("option",{attrs:{value:"etherpad"}},[e._v("Etherpad")]),t("option",{attrs:{value:"nagios"}},[e._v("Nagios")])])],1),t("b-field",{attrs:{label:"Version"}},[t("b-select",{attrs:{placeholder:"Select a service version",expanded:""},model:{value:e.form.version.selected,callback:function(t){e.$set(e.form.version,"selected",t)},expression:"form.version.selected"}},e._l(e.form.version.options,(function(s){return t("option",{key:s.value},[e._v(" "+e._s(s.text)+" ")])})),0),t("p",{staticClass:"control"},[t("b-button",{attrs:{label:"Get Latest Versions",type:"is-warning"},on:{click:function(t){return e.onServiceChange("false")}}})],1)],1),t("b-field",{attrs:{label:"Delete After"}},[t("b-input",{attrs:{type:"number",placeholder:"0"},model:{value:e.form.delete_after_period,callback:function(t){e.$set(e.form,"delete_after_period",t)},expression:"form.delete_after_period"}}),t("b-select",{attrs:{placeholder:"Period (disabled by default)",expanded:""},model:{value:e.form.delete_after_type,callback:function(t){e.$set(e.form,"delete_after_type",t)},expression:"form.delete_after_type"}},[t("option",{attrs:{value:"",selected:""}},[e._v("Disabled")]),t("option",{attrs:{value:"sec"}},[e._v("Seconds")]),t("option",{attrs:{value:"min"}},[e._v("Minutes")]),t("option",{attrs:{value:"hours"}},[e._v("Hours")]),t("option",{attrs:{value:"days"}},[e._v("Days")])])],1),"redis"==e.form.type?[t("b-field",{attrs:{label:"Redis Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.redis.password,callback:function(t){e.$set(e.form.configs.redis,"password",t)},expression:"form.configs.redis.password"}})],1)]:e._e(),"mysql"==e.form.type?[t("b-field",{attrs:{label:"MySQL Root Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mysql.rootPassword,callback:function(t){e.$set(e.form.configs.mysql,"rootPassword",t)},expression:"form.configs.mysql.rootPassword"}})],1),t("b-field",{attrs:{label:"MySQL Database"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mysql.database,callback:function(t){e.$set(e.form.configs.mysql,"database",t)},expression:"form.configs.mysql.database"}})],1),t("b-field",{attrs:{label:"MySQL Username"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mysql.username,callback:function(t){e.$set(e.form.configs.mysql,"username",t)},expression:"form.configs.mysql.username"}})],1),t("b-field",{attrs:{label:"MySQL Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mysql.password,callback:function(t){e.$set(e.form.configs.mysql,"password",t)},expression:"form.configs.mysql.password"}})],1)]:e._e(),"mariadb"==e.form.type?[t("b-field",{attrs:{label:"MariaDB Root Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mariadb.rootPassword,callback:function(t){e.$set(e.form.configs.mariadb,"rootPassword",t)},expression:"form.configs.mariadb.rootPassword"}})],1),t("b-field",{attrs:{label:"MariaDB Database"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mariadb.database,callback:function(t){e.$set(e.form.configs.mariadb,"database",t)},expression:"form.configs.mariadb.database"}})],1),t("b-field",{attrs:{label:"MariaDB Username"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mariadb.username,callback:function(t){e.$set(e.form.configs.mariadb,"username",t)},expression:"form.configs.mariadb.username"}})],1),t("b-field",{attrs:{label:"MariaDB Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mariadb.password,callback:function(t){e.$set(e.form.configs.mariadb,"password",t)},expression:"form.configs.mariadb.password"}})],1)]:e._e(),"postgresql"==e.form.type?[t("b-field",{attrs:{label:"PostgreSQL Database"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.postgresql.database,callback:function(t){e.$set(e.form.configs.postgresql,"database",t)},expression:"form.configs.postgresql.database"}})],1),t("b-field",{attrs:{label:"PostgreSQL Username"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.postgresql.username,callback:function(t){e.$set(e.form.configs.postgresql,"username",t)},expression:"form.configs.postgresql.username"}})],1),t("b-field",{attrs:{label:"PostgreSQL Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.postgresql.password,callback:function(t){e.$set(e.form.configs.postgresql,"password",t)},expression:"form.configs.postgresql.password"}})],1)]:e._e(),"grafana"==e.form.type?[t("b-field",{attrs:{label:"Login Username"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.grafana.username,callback:function(t){e.$set(e.form.configs.grafana,"username",t)},expression:"form.configs.grafana.username"}})],1),t("b-field",{attrs:{label:"Login Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.grafana.password,callback:function(t){e.$set(e.form.configs.grafana,"password",t)},expression:"form.configs.grafana.password"}})],1),t("b-field",{attrs:{label:"Allow Signup"}},[t("b-select",{attrs:{placeholder:"Allow Signup",expanded:""},model:{value:e.form.configs.grafana.allowSignup,callback:function(t){e.$set(e.form.configs.grafana,"allowSignup",t)},expression:"form.configs.grafana.allowSignup"}},[t("option",{attrs:{value:"false"}},[e._v("off")]),t("option",{attrs:{value:"true"}},[e._v("on")])])],1),t("b-field",{attrs:{label:"Anonymous Access"}},[t("b-select",{attrs:{placeholder:"Anonymous Access",expanded:""},model:{value:e.form.configs.grafana.anonymousAccess,callback:function(t){e.$set(e.form.configs.grafana,"anonymousAccess",t)},expression:"form.configs.grafana.anonymousAccess"}},[t("option",{attrs:{value:"true"}},[e._v("on")]),t("option",{attrs:{value:"false"}},[e._v("off")])])],1)]:e._e(),"mongodb"==e.form.type?[t("b-field",{attrs:{label:"MongoDB Database"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mongodb.database,callback:function(t){e.$set(e.form.configs.mongodb,"database",t)},expression:"form.configs.mongodb.database"}})],1),t("b-field",{attrs:{label:"MongoDB Username"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mongodb.username,callback:function(t){e.$set(e.form.configs.mongodb,"username",t)},expression:"form.configs.mongodb.username"}})],1),t("b-field",{attrs:{label:"MongoDB Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.mongodb.password,callback:function(t){e.$set(e.form.configs.mongodb,"password",t)},expression:"form.configs.mongodb.password"}})],1)]:e._e(),"vault"==e.form.type?[t("b-field",{attrs:{label:"Vault Root Token"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.vault.token,callback:function(t){e.$set(e.form.configs.vault,"token",t)},expression:"form.configs.vault.token"}})],1)]:e._e(),"prometheus"==e.form.type?[t("b-field",{attrs:{label:"YAML Configs (please ensure it is valid)"}},[t("b-input",{attrs:{type:"textarea",rows:"18"},model:{value:e.form.configs.prometheus.configsBase64Decoded,callback:function(t){e.$set(e.form.configs.prometheus,"configsBase64Decoded",t)},expression:"form.configs.prometheus.configsBase64Decoded"}})],1)]:e._e(),"minio"==e.form.type?[t("b-field",{attrs:{label:"Minio Username"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.minio.username,callback:function(t){e.$set(e.form.configs.minio,"username",t)},expression:"form.configs.minio.username"}})],1),t("b-field",{attrs:{label:"Minio Password"}},[t("b-input",{attrs:{value:""},model:{value:e.form.configs.minio.password,callback:function(t){e.$set(e.form.configs.minio,"password",t)},expression:"form.configs.minio.password"}})],1)]:e._e(),t("br"),t("div",{staticClass:"field"},[t("p",{staticClass:"control"},[t("b-button",{attrs:{type:"is-danger is-light",disabled:e.form.button_disabled},on:{click:e.deployEvent}},[e._v("Deploy")])],1)])],2)])])},r=[],a=(s(2801),s(7658),{name:"DeployPage",data(){return{form:{button_disabled:!1,type:"",delete_after_type:"",delete_after_period:"",version:{selected:"",options:[{text:"Default",value:""}]},configs:{redis:{password:""},consul:{},registry:{},ghost:{},httpbin:{},etherpad:{},nagios:{},vault:{token:"peanut"},mysql:{rootPassword:"root",database:"peanut",username:"peanut",password:"secret"},mariadb:{rootPassword:"root",database:"peanut",username:"peanut",password:"secret"},postgresql:{database:"peanut",username:"peanut",password:"secret"},grafana:{username:"admin",password:"secret",anonymousAccess:"true",allowSignup:"false"},mongodb:{database:"peanut",username:"peanut",password:"secret"},cassandra:{},prometheus:{configsBase64Encoded:"",configsBase64Decoded:this.b64_to_utf8("Z2xvYmFsOgogIGV2YWx1YXRpb25faW50ZXJ2YWw6IDE1cwogIHNjcmFwZV9pbnRlcnZhbDogMTVzCnJ1bGVfZmlsZXM6IH4Kc2NyYXBlX2NvbmZpZ3M6CiAgLQogICAgam9iX25hbWU6IHByb21ldGhldXMKICAgIHNjcmFwZV9pbnRlcnZhbDogNXMKICAgIHN0YXRpY19jb25maWdzOgogICAgICAtCiAgICAgICAgdGFyZ2V0czoKICAgICAgICAgIC0gImxvY2FsaG9zdDo5MDkwIg==")},minio:{username:"admin12345678",password:"admin12345678"}}},loader:{isFullPage:!0,ref:null}}},methods:{loading(){this.loader.ref=this.$buefy.loading.open({container:this.loader.isFullPage?null:this.$refs.element.$el})},utf8_to_b64(e){return window.btoa(unescape(encodeURIComponent(e)))},b64_to_utf8(e){return decodeURIComponent(escape(window.atob(e)))},onServiceChange(e="true"){""!=this.form.type?(this.loading(),this.$store.dispatch("service/getServiceTagsAction",{serviceType:this.form.type,cache:e}).then((()=>{let e=this.$store.getters["service/getServiceTagsResult"];this.form.version={selected:"",options:[{text:"Default",value:""}]};for(var t=0;t<e.tags.length;t++)this.form.version.options.push({text:e.tags[t],value:e.tags[t]});this.loader.ref.close()}),(e=>{e.response.data.errorMessage?this.$buefy.toast.open({message:e.response.data.errorMessage,type:"is-danger is-light"}):this.$buefy.toast.open({message:"Error status code: "+e.response.status,type:"is-danger is-light"}),this.loader.ref.close()}))):this.form.version={selected:"",options:[{text:"Default",value:""}]}},deployEvent(){this.loading(),this.form.button_disabled=!0;let e="";""!=this.form.delete_after_type&&this.form.delete_after_period>0&&(e=this.form.delete_after_period+this.form.delete_after_type);let t={};"redis"==this.form.type?t=this.form.configs.redis:"mysql"==this.form.type?t=this.form.configs.mysql:"mariadb"==this.form.type?t=this.form.configs.mariadb:"postgresql"==this.form.type?t=this.form.configs.postgresql:"grafana"==this.form.type?t=this.form.configs.grafana:"mongodb"==this.form.type?t=this.form.configs.mongodb:"prometheus"==this.form.type?t={configsBase64Encoded:this.utf8_to_b64(this.form.configs.prometheus.configsBase64Decoded)}:"consul"==this.form.type?t=this.form.configs.consul:"vault"==this.form.type?t=this.form.configs.vault:"cassandra"==this.form.type?t=this.form.configs.cassandra:"minio"==this.form.type?t=this.form.configs.minio:"registry"==this.form.type?t=this.form.configs.registry:"ghost"==this.form.type?t=this.form.configs.ghost:"httpbin"==this.form.type?t=this.form.configs.httpbin:"etherpad"==this.form.type?t=this.form.configs.etherpad:"nagios"==this.form.type&&(t=this.form.configs.nagios),this.$store.dispatch("service/deployServiceAction",{service:this.form.type,deleteAfter:e,configs:t,version:this.form.version.selected}).then((()=>{let e=this.$store.getters["service/getDeployServiceResult"];var t=setInterval((()=>{this.$store.dispatch("service/getJobAction",{serviceId:e.service,jobId:e.id}).then((()=>{let e=this.$store.getters["service/getJobResult"];"SUCCESS"==e.status?(this.$buefy.toast.open({message:"Service deployed successfully!",type:"is-success"}),this.form.button_disabled=!1,this.loader.ref.close(),clearInterval(t),this.$router.push("/services")):"FAILED"==e.status&&(this.$buefy.toast.open({message:"Service deployment failed",type:"is-danger"}),this.form.button_disabled=!1,this.loader.ref.close(),clearInterval(t))}),(e=>{e.response.data.errorMessage?this.$buefy.toast.open({message:e.response.data.errorMessage,type:"is-danger"}):this.$buefy.toast.open({message:"Error occurred: "+e.response.status,type:"is-danger"}),this.form.button_disabled=!1}))}),3e3)}),(e=>{e.response.data.errorMessage?this.$buefy.toast.open({message:e.response.data.errorMessage,type:"is-danger is-light"}):this.$buefy.toast.open({message:"Error status code: "+e.response.status,type:"is-danger is-light"}),this.form.button_disabled=!1,this.loader.ref.close()}))}},mounted(){}}),n=a,i=s(1001),l=(0,i.Z)(n,o,r,!1,null,null,null),c=l.exports},6077:function(e,t,s){var o=s(614),r=String,a=TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw a("Can't set "+r(e)+" as a prototype")}},5787:function(e,t,s){var o=s(7976),r=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw r("Incorrect invocation")}},648:function(e,t,s){var o=s(1694),r=s(614),a=s(4326),n=s(5112),i=n("toStringTag"),l=Object,c="Arguments"==a(function(){return arguments}()),f=function(e,t){try{return e[t]}catch(s){}};e.exports=o?a:function(e){var t,s,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=f(t=l(e),i))?s:c?a(t):"Object"==(o=a(t))&&r(t.callee)?"Arguments":o}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},1060:function(e,t,s){var o=s(1702),r=Error,a=o("".replace),n=function(e){return String(r(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,l=i.test(n);e.exports=function(e,t){if(l&&"string"==typeof e&&!r.prepareStackTrace)while(t--)e=a(e,i,"");return e}},5668:function(e,t,s){var o=s(1702),r=s(9662);e.exports=function(e,t,s){try{return o(r(Object.getOwnPropertyDescriptor(e,t)[s]))}catch(a){}}},9587:function(e,t,s){var o=s(614),r=s(111),a=s(7674);e.exports=function(e,t,s){var n,i;return a&&o(n=t.constructor)&&n!==s&&r(i=n.prototype)&&i!==s.prototype&&a(e,i),e}},6277:function(e,t,s){var o=s(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:o(e)}},7674:function(e,t,s){var o=s(5668),r=s(9670),a=s(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,s={};try{e=o(Object.prototype,"__proto__","set"),e(s,[]),t=s instanceof Array}catch(n){}return function(s,o){return r(s),a(o),t?e(s,o):s.__proto__=o,s}}():void 0)},1694:function(e,t,s){var o=s(5112),r=o("toStringTag"),a={};a[r]="z",e.exports="[object z]"===String(a)},1340:function(e,t,s){var o=s(648),r=String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},2801:function(e,t,s){"use strict";var o=s(2109),r=s(7854),a=s(5005),n=s(9114),i=s(3070).f,l=s(2597),c=s(5787),f=s(9587),u=s(6277),m=s(3678),d=s(1060),p=s(9781),g=s(1913),b="DOMException",v=a("Error"),h=a(b),_=function(){c(this,y);var e=arguments.length,t=u(e<1?void 0:arguments[0]),s=u(e<2?void 0:arguments[1],"Error"),o=new h(t,s),r=v(t);return r.name=b,i(o,"stack",n(1,d(r.stack,1))),f(o,this,_),o},y=_.prototype=h.prototype,E="stack"in v(b),R="stack"in new h(1,2),w=h&&p&&Object.getOwnPropertyDescriptor(r,b),A=!!w&&!(w.writable&&w.configurable),I=E&&!A&&!R;o({global:!0,constructor:!0,forced:g||I},{DOMException:I?_:h});var D=a(b),S=D.prototype;if(S.constructor!==D)for(var x in g||i(S,"constructor",n(1,D)),m)if(l(m,x)){var M=m[x],k=M.s;l(D,k)||i(D,k,n(6,M.c))}}}]);
//# sourceMappingURL=881.3f5d3418.js.map